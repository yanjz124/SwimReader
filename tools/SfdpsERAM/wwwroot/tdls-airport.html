<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TDLS | swim.vncrcc.org</title>
<style>
@font-face { font-family: 'ERAM'; src: url(data:font/truetype;base64,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ATMRIxUjFSMVIREhFTMVMwMRIzUjNSERITUzNQW9g4ODgfxzA42Bg4OBg/36AgaDBBL9eYWBgwWahYH89QKHhIH7boGFAAAAAAEBLAACBkAFnAAPAAABMyEVIREhFSERIRUhKwERAauHBA778gMK/PYEDvvyh38FnIP994P9+IMFmgAAAAEBLQACBj8FnAALAAABMyEVIREhFSERIREBqocEDvvyAwz89P78BZyD/feD/XUFmgAAAAABASwAAgZABZwAJAAAATsBESMdASE1IzUjETMROwE1IR0BITUhFSMVIxEhFSE1MxEhNQU8HeeB/HODg4ODfwMM/vz+fYGDAQABiYH9+gKP/nmDg4ODAwwBBYODg4ODgvz0g4MBBIMAAAEBLAACBkAFnAALAAABESERIREhESERIREFPAEE/vz89P78AQQDEAKM+mYCi/11BZr9dAABATAAAgY8BZwADwAAASkBFSERIRUpAjUhESE1AzQBBAIE/fwCBP38/vz9/AIE/fwFnIP7bIODBJSDAAABASoAAgZCBZwAEwAAAREhESMRIxUhNSMRIzUhFTMRIREFPgEEg4H88oODAQaBAgoBiQQT++3+/IODAQSDg/78AQQAAAEBLAACBkAFnAAxAAABNSEVIxUjFSMVIxUjFTMVMxUzFTMVMxUhNSM1IzUjNSM1KwERIREhETsBNTM1MzUzNQU8AQSDgYODgYGDg4GD/vyDg4GDg3/+/AEEf4ODgYMFG4GDgYSBg4ODgYOBg4GDg4GD/XUFmv10g4GEgwABASsAAgZBBZwABwAAAREhFSkBNRECLwQS++7+/AWc+umDgwUXAAAAAQErAAIGQQWcABsAAAE1IREhESMVIxUhNSM1IxEhESEVMxUzESERMzUFPQEE/vyDg/78gYH++gEGgYMBAoMFG4H6ZgORg4ODg/xvBZqBg/77AQWDAAAAAAEBKwACBkEFnAAfAAABESERITUjNSM1IxEjNSM1IxEhESEVMxUzETMVMxUzFQU7AQb++oGDgYGDgf76AQaBg4GBgwIKA5L6ZoGDgwEEg4P8bwWagYP++4ODgwAAAgEsAAIGQAWcABMAHwAAARUzESERITUhFSERIREzNSE1IRUDNSEVIRUhNSE1IRUFvYP+/P7+/vj/AP76gwEEAgZ/AYP+/P36/vwBgwUbg/xwA5B/f/xwA5CDgYH7aoGDgYGDgQAAAAACASsAAgZBBZgACwATAAABMxEhFSERIREhFTMDESM1IREhNQW+g/78/PT++gQSgYGD/XcCiQST/nuF/XkFloH+eAEEgf36gQACASwAAAZABZgAFwArAAABIxUzFSE1IxUhNSE1IxEzNSE1IRUhFTMBESE1IRUhESEVIREjNSM1IRUzFQZAg4P+/IP9+v78g4MBBAIGAQSD/vr/AP74/wABAAEIg4MBBIMBBIOBf39/hQOPhn9/hvzyAw6BgfxxgQECg4GBgwAAAAIBKwAABkEFmAAXAB8AAAEhFTMRMxEzFSE1IxEjESERIREhFTMVMwEzESM1IREhBkH++ASBgf78g3/99v78BBCDg/55gYH9dQKLAw6D/vz++oGBAQYBBP11BZiBhP7+AQKB/foAAAAAAQEsAAAGQAWYACcAAAEhNSEVIxEzFSEVIRUzESEVITUhNSEVITUzESE1IREjETM1MzUhFSEGQP57/fiDgwEEAgiB/vr89v78AYcCCH/9/P55g4OBAxABAASTgYH+/IGDgf53gYGDg4MBBoEBBAEEhn9/AAABAS4AAAY+BZgACQAAASkBFSERIREhNQM0AQQCBv36/vz9+gWYhPrsBRSEAAEBKwAABkEFmAATAAABESERIxUjFSE1IzUjESERMxUhNQU7AQaBhfz0gYMBBoECCAEEBJT7bIOBgYMElPtsgYEAAAAAAQErAAAGQQWYAB8AAAERIREjESMRIxUjFSE1IzUjESMRIxEhETMRMxEzETMRBTsBBoODg3/++oN/g4MBBoOD/oMEEgGG/nr+ef55gYODgQGHAYcBhv56/nn+fQGDAYcAAQEsAAAGQAWaABsAAAERIREjESE1IxEhESMVIREjESEROwI1IRU7AQU6AQaD/vyB/vyB/vqBAQQnXIEBBIFcAosDD/zx/XWDAQT+/IMCiwMP/PGBgQAAAAEBKwAABkEFmgA7AAABESERIxUjFSMVIxUzFTMVMxUzESERIzUjNSEVIxUjESERMzUzNTM1MzUjNSM1IzUjESERMxUzFSE1MzUFPQEEgYOBhYWBg4H+/IGD/vyDg/78g4GDg4ODgYMBBIODAQSDBJMBB/75gYOBg4GDgf78AQSBg4OB/voBBoGDgYOBg4EBB/75gYODgQAAAQEqAAAGQgWaACAAAAER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) format('truetype'); }
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    background: #000;
    color: #fff;
    font-family: 'ERAM', 'Consolas', 'Courier New', monospace;
    height: 100vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

/* ── Header ─────────────────────────────────────────────────── */
header {
    background: #000;
    border-bottom: 1px solid #333;
    padding: 8px 16px;
    display: flex;
    align-items: center;
    gap: 20px;
    flex-shrink: 0;
}
header .back { color: #888; text-decoration: none; font-size: 12px; }
header .back:hover { color: #fff; }
header h1 { font-size: 15px; letter-spacing: 2px; font-weight: normal; }
header .stats { font-size: 11px; color: #888; margin-left: auto; }
#status { font-size: 11px; color: #666; margin-left: 12px; }
#status.ok { color: #44aa44; }

/* ── Main layout ────────────────────────────────────────────── */
.main {
    display: flex;
    flex: 1;
    overflow: hidden;
}

/* ── Left panel: aircraft list ──────────────────────────────── */
.ac-list {
    width: 200px;
    min-width: 200px;
    border-right: 1px solid #333;
    overflow-y: auto;
    flex-shrink: 0;
}
.ac-item {
    padding: 8px 12px;
    cursor: pointer;
    border-bottom: 1px solid #1a1a1a;
    transition: background 0.1s;
}
.ac-item:hover { background: #1a1a1a; }
.ac-item.selected { background: #1a2a1a; border-left: 2px solid #44aa44; }
.ac-item .callsign { font-size: 15px; color: #fff; }
.ac-item .meta { font-size: 12px; color: #666; margin-top: 2px; }
.ac-item .badge {
    display: inline-block;
    font-size: 11px;
    color: #888;
    background: #1a1a1a;
    padding: 1px 5px;
    border-radius: 2px;
    margin-left: 8px;
}
.ac-item.flash { animation: flash 0.6s ease-out; }
@keyframes flash { 0% { background: #2a2a00; } 100% { background: transparent; } }

/* ── Right panel: message detail ────────────────────────────── */
.detail {
    flex: 1;
    overflow-y: auto;
    padding: 16px 20px;
}
.detail .empty { color: #444; font-size: 12px; padding-top: 40px; text-align: center; }

.msg-card {
    margin-bottom: 20px;
    border: 1px solid #222;
    background: #0a0a0a;
    border-radius: 2px;
}
.msg-header {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 8px 12px;
    border-bottom: 1px solid #222;
    font-size: 13px;
}
.msg-time { color: #44aa44; }
.msg-type { color: #888; }
.msg-type.cpdlc { color: #5588ff; }
.msg-type.depart { color: #ff8844; }
.msg-meta {
    padding: 8px 12px;
    font-size: 12px;
    color: #666;
    border-bottom: 1px solid #1a1a1a;
    display: flex;
    gap: 0;
}
.msg-meta .field { margin-right: 20px; }
.msg-meta .field span { color: #ccc; }
.msg-body {
    padding: 10px 12px;
    font-size: 13px;
    line-height: 1.5;
    white-space: pre-wrap;
    word-break: break-word;
    color: #ddd;
}
.msg-body .sub-msg {
    margin-bottom: 10px;
    padding-bottom: 10px;
    border-bottom: 1px solid #1a1a1a;
}
.msg-body .sub-msg:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
.msg-body .sub-num { color: #666; }
.msg-body .pilot-response { color: #44aa44; }
.msg-body .clearance { color: #fff; }

/* Departure card */
.depart-grid {
    padding: 10px 12px;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: 8px 16px;
    font-size: 11px;
}
.depart-grid .label { color: #666; font-size: 10px; }
.depart-grid .value { color: #fff; margin-top: 1px; }
.depart-timeline {
    padding: 8px 12px;
    border-top: 1px solid #1a1a1a;
    font-size: 11px;
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
}
.depart-timeline .step { color: #888; }
.depart-timeline .step .t { color: #ff8844; }
</style>
</head>
<body>

<header>
    <a class="back" href="/tdls">◀ TDLS</a>
    <h1 id="airport-title">TDLS</h1>
    <div class="stats" id="stats"></div>
    <div id="status">connecting...</div>
</header>

<div class="main">
    <div class="ac-list" id="ac-list"></div>
    <div class="detail" id="detail">
        <div class="empty">Select an aircraft to view CPDLC messages</div>
    </div>
</div>

<script>
const AIRPORT = location.pathname.split('/').pop().toUpperCase();
document.getElementById('airport-title').textContent = `TDLS  ${AIRPORT}`;
document.title = `TDLS ${AIRPORT} | swim.vncrcc.org`;

let state = {}; // aircraftId → { aircraftId, acType, destination, beaconCode, messageCount, lastSeen, messages:[] }
let selectedAc = null;

const acListEl = document.getElementById('ac-list');
const detailEl = document.getElementById('detail');
const statsEl  = document.getElementById('stats');
const statusEl = document.getElementById('status');

// ── WebSocket ──────────────────────────────────────────────────
let ws = null;
function connect() {
    const proto = location.protocol === 'https:' ? 'wss:' : 'ws:';
    ws = new WebSocket(`${proto}//${location.host}/tdls/ws/${AIRPORT.toLowerCase()}`);

    ws.onopen = () => {
        statusEl.textContent = 'LIVE';
        statusEl.className = 'ok';
    };

    ws.onmessage = (ev) => {
        const msg = JSON.parse(ev.data);
        if (msg.type === 'snapshot') {
            handleSnapshot(msg.data);
        } else if (msg.type === 'new') {
            handleNewMessages(msg.data);
        }
    };

    ws.onclose = () => {
        statusEl.textContent = 'DISCONNECTED';
        statusEl.className = '';
        setTimeout(connect, 5000);
    };

    ws.onerror = () => ws.close();
}

function handleSnapshot(data) {
    state = {};
    if (data.aircraft) {
        for (const ac of data.aircraft) {
            state[ac.aircraftId] = ac;
        }
    }
    renderAcList();
    if (selectedAc && state[selectedAc]) renderDetail(selectedAc);
    else if (selectedAc) { selectedAc = null; renderDetail(null); }
}

function handleNewMessages(messages) {
    const flashIds = new Set();
    for (const msg of messages) {
        const id = msg.aircraftId;
        if (!state[id]) {
            state[id] = {
                aircraftId: id,
                acType: msg.acType,
                destination: msg.destination,
                beaconCode: msg.beaconCode,
                messageCount: 0,
                lastSeen: msg.time,
                messages: []
            };
        }
        const ac = state[id];
        ac.messages.push(msg);
        ac.messageCount = ac.messages.length;
        ac.lastSeen = msg.time;
        if (msg.acType) ac.acType = msg.acType;
        if (msg.destination) ac.destination = msg.destination;
        if (msg.beaconCode) ac.beaconCode = msg.beaconCode;
        flashIds.add(id);
    }
    renderAcList(flashIds);
    if (selectedAc && flashIds.has(selectedAc)) renderDetail(selectedAc);
}

// ── Render aircraft list ───────────────────────────────────────
function renderAcList(flashIds) {
    const sorted = Object.values(state).sort((a, b) => {
        const ta = new Date(a.lastSeen).getTime();
        const tb = new Date(b.lastSeen).getTime();
        return tb - ta;
    });

    const totalMsg = sorted.reduce((s, a) => s + a.messageCount, 0);
    statsEl.textContent = `${sorted.length} acft  •  ${totalMsg} msg`;

    acListEl.innerHTML = sorted.map(ac => {
        const sel = ac.aircraftId === selectedAc ? ' selected' : '';
        const flash = flashIds && flashIds.has(ac.aircraftId) ? ' flash' : '';
        const dest = ac.destination ? ` → ${ac.destination.replace(/^K/, '')}` : '';
        return `<div class="ac-item${sel}${flash}" data-id="${ac.aircraftId}">
            <div class="callsign">${ac.aircraftId}<span class="badge">${ac.messageCount}</span></div>
            <div class="meta">${ac.acType || ''}${dest}</div>
        </div>`;
    }).join('');

    acListEl.querySelectorAll('.ac-item').forEach(el => {
        el.addEventListener('click', () => {
            selectedAc = el.dataset.id;
            renderAcList();
            renderDetail(selectedAc);
        });
    });
}

// ── Render message detail ──────────────────────────────────────
function renderDetail(aircraftId) {
    if (!aircraftId || !state[aircraftId]) {
        detailEl.innerHTML = '<div class="empty">Select an aircraft to view CPDLC messages</div>';
        return;
    }

    const ac = state[aircraftId];
    // Show messages newest first
    const msgs = [...ac.messages].reverse();

    detailEl.innerHTML = msgs.map(m => {
        if (m.type === 'CPDLC') return renderCpdlc(m);
        if (m.type === 'DEPART') return renderDepart(m);
        return '';
    }).join('');

    detailEl.scrollTop = 0;
}

function renderCpdlc(m) {
    const t = fmtTime(m.time);
    const subMsgs = parseCpdlcBody(m.dataBody || '');

    let metaParts = [];
    if (m.acType) metaParts.push(`<div class="field"><span>${m.acType}</span></div>`);
    if (m.beaconCode) metaParts.push(`<div class="field">BCN <span>${m.beaconCode}</span></div>`);
    if (m.cid) metaParts.push(`<div class="field">CID <span>${m.cid}</span></div>`);
    if (m.destination) metaParts.push(`<div class="field">→ <span>${m.destination}</span></div>`);

    return `<div class="msg-card">
        <div class="msg-header">
            <span class="msg-time">${t}</span>
            <span class="msg-type cpdlc">CPDLC</span>
        </div>
        ${metaParts.length ? `<div class="msg-meta">${metaParts.join('')}</div>` : ''}
        <div class="msg-body">${subMsgs.map(renderSubMsg).join('')}</div>
    </div>`;
}

function renderDepart(m) {
    const t = fmtTime(m.time);

    let gridItems = [];
    if (m.gate && m.gate !== 'N/A') gridItems.push({ label: 'GATE', value: m.gate });
    if (m.runway) gridItems.push({ label: 'RUNWAY', value: m.runway });
    if (m.destination) gridItems.push({ label: 'DESTINATION', value: m.destination });
    if (m.acType) gridItems.push({ label: 'TYPE', value: m.acType });
    if (m.beaconCode) gridItems.push({ label: 'BEACON', value: m.beaconCode });
    if (m.cid) gridItems.push({ label: 'CID', value: m.cid });

    let timeline = [];
    if (m.clearanceTime) timeline.push({ label: 'CLR', time: fmtTimeShort(m.clearanceTime) });
    if (m.taxiTime) timeline.push({ label: 'TAXI', time: fmtTimeShort(m.taxiTime) });
    if (m.takeoffTime) timeline.push({ label: 'T/O', time: fmtTimeShort(m.takeoffTime) });

    return `<div class="msg-card">
        <div class="msg-header">
            <span class="msg-time">${t}</span>
            <span class="msg-type depart">DEPARTURE</span>
        </div>
        <div class="depart-grid">
            ${gridItems.map(i => `<div><div class="label">${i.label}</div><div class="value">${i.value}</div></div>`).join('')}
        </div>
        ${timeline.length ? `<div class="depart-timeline">${timeline.map(s => `<div class="step">${s.label} <span class="t">${s.time}</span></div>`).join('')}</div>` : ''}
    </div>`;
}

// ── CPDLC body parser ──────────────────────────────────────────
// dataBody contains numbered sub-messages like:
// "005 AAL2469 KDFW ... PILOT RESPONSE - ROGER 002 CPDLC DCL DISPATCH MSG..."
// Numbers are 3-digit sequences at the start or preceded by space
function parseCpdlcBody(body) {
    if (!body) return [{ text: body, isPilot: false }];

    const parts = [];
    // Split on 3-digit message sequence numbers
    const regex = /(?:^|\s)(\d{3})\s/g;
    let matches = [];
    let m;
    while ((m = regex.exec(body)) !== null) {
        matches.push({ index: m.index, seqStart: m.index + (m[0].startsWith(' ') ? 1 : 0), num: m[1], contentStart: m.index + m[0].length });
    }

    if (matches.length === 0) return [{ text: body.trim(), isPilot: false }];

    for (let i = 0; i < matches.length; i++) {
        const start = matches[i].contentStart;
        const end = i + 1 < matches.length ? matches[i + 1].seqStart : body.length;
        const text = body.substring(start, end).trim();
        const isPilot = /PILOT\s+RESPONSE/i.test(text);
        parts.push({ num: matches[i].num, text, isPilot });
    }

    return parts;
}

function renderSubMsg(sub) {
    if (sub.isPilot) {
        // Extract the response text after "PILOT RESPONSE - "
        const respMatch = sub.text.match(/PILOT\s+RESPONSE\s*-\s*(.*)/i);
        const resp = respMatch ? respMatch[1].trim() : sub.text;
        return `<div class="sub-msg">
            <span class="sub-num">${sub.num || ''}</span> <span class="pilot-response">PILOT RESPONSE — ${resp}</span>
        </div>`;
    }

    // Format clearance text — highlight key parts
    let text = sub.text || '';
    // Try to find the clearance portion
    const clrMatch = text.match(/(CLEARED TO .+)/i);
    if (clrMatch) {
        const before = text.substring(0, clrMatch.index);
        const clr = clrMatch[1];
        return `<div class="sub-msg">
            <span class="sub-num">${sub.num || ''}</span> ${escHtml(before)}
<span class="clearance">${escHtml(clr)}</span>
        </div>`;
    }

    return `<div class="sub-msg">
        <span class="sub-num">${sub.num || ''}</span> ${escHtml(text)}
    </div>`;
}

// ── Helpers ────────────────────────────────────────────────────
function fmtTime(iso) {
    if (!iso) return '';
    const s = new Date(iso).toISOString();
    return s.substring(5, 10).replace('-', '/') + ' ' + s.substring(11, 19) + 'Z';
}

function fmtTimeShort(iso) {
    if (!iso) return '';
    const s = new Date(iso).toISOString();
    return s.substring(11, 16);
}

function escHtml(s) {
    return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
}

// ── Init ───────────────────────────────────────────────────────
connect();
</script>
</body>
</html>
